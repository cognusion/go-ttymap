

# ttymap
`import "github.com/cognusion/go-ttymap"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Examples](#pkg-examples)

## <a name="pkg-overview">Overview</a>
Package ttymap is a utility to map keypresses (runes) to callbacks for CLI applications.
The rune pressed is sent to the callback, but can be ignored.


##### Example :
``` go
var (
    runeP rune
    runeQ rune
)

z := New()
go z.Run() // launch it async

// closer stops Gnome and Vinz Clortho
closer := func(r rune) {
    // close(someChan) or something.Stop() to shut your app down
    z.Close() // Stupid important that this gets called, but waiting for a defer is generally late.
}

pause := func(r rune) {
    // pause your app?
}

z.Upsert(runeP, pause)  // toggles pause status
z.Upsert(runeQ, closer) // closes all the things

// start your app up

// z.Run() // blocks
```



## <a name="pkg-index">Index</a>
* [type KeyFunc](#KeyFunc)
* [type TtyMap](#TtyMap)
  * [func New() *TtyMap](#New)
  * [func (z *TtyMap) Close()](#TtyMap.Close)
  * [func (z *TtyMap) Remove(r rune)](#TtyMap.Remove)
  * [func (z *TtyMap) Run()](#TtyMap.Run)
  * [func (z *TtyMap) Upsert(r rune, f KeyFunc)](#TtyMap.Upsert)

#### <a name="pkg-examples">Examples</a>
* [Package](#example-)

#### <a name="pkg-files">Package files</a>
[ttymap.go](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go)






## <a name="KeyFunc">type</a> [KeyFunc](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go?s=285:308#L13)
``` go
type KeyFunc func(rune)
```
KeyFunc is a type used for callbacks upon keypresses.










## <a name="TtyMap">type</a> [TtyMap](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go?s=333:465#L16)
``` go
type TtyMap struct {
    // contains filtered or unexported fields
}

```
TtyMap is cool, eh?







### <a name="New">func</a> [New](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go?s=511:529#L25)
``` go
func New() *TtyMap
```
New returns a barely initialized TtyMap.





### <a name="TtyMap.Close">func</a> (\*TtyMap) [Close](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go?s=2128:2152#L92)
``` go
func (z *TtyMap) Close()
```
Close will signal the Run() loop to end, and close the TTY.
You must create a New() if you want to continue mapping the keypresses.




### <a name="TtyMap.Remove">func</a> (\*TtyMap) [Remove](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go?s=1204:1235#L48)
``` go
func (z *TtyMap) Remove(r rune)
```
Remove will delete the key denoted by the specified rune if it exists.
This function is safe to call across goros. This function is safe to call if one is
uncertain if the rune has been Upsertted previously.




### <a name="TtyMap.Run">func</a> (\*TtyMap) [Run](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go?s=1486:1508#L57)
``` go
func (z *TtyMap) Run()
```
Run opens the TTY and waits for a keypress. Run is intended to be executed in its
own goro, but could be run inline. Will only execute once, but may be called concurrently.




### <a name="TtyMap.Upsert">func</a> (\*TtyMap) [Upsert](https://github.com/cognusion/go-ttymap/tree/master/ttymap.go?s=877:919#L38)
``` go
func (z *TtyMap) Upsert(r rune, f KeyFunc)
```
Upsert either updates or adds a func(rune) for keypress of the specified rune.
This function is safe to call across goros, however if the same rune is used in multiple
requests, the "last" one "wins".








- - -
Generated by [godoc2md](http://github.com/cognusion/godoc2md)
